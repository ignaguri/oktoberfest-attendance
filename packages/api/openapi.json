{
  "openapi": "3.1.0",
  "info": {
    "title": "ProstCounter API",
    "version": "0.1.0",
    "description": "API for ProstCounter - Oktoberfest attendance tracking"
  },
  "servers": [
    {
      "url": "http://localhost:3008/api",
      "description": "Local development"
    },
    {
      "url": "https://prostcounter.vercel.app/api",
      "description": "Production"
    }
  ],
  "components": {
    "schemas": {},
    "parameters": {}
  },
  "paths": {
    "/v1/consumption": {
      "post": {
        "tags": [
          "consumption"
        ],
        "summary": "Log a new beer or drink consumption",
        "description": "Records a consumption and updates the attendance record with computed totals",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "festivalId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "date": {
                    "type": "string",
                    "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                  },
                  "tentId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "drinkType": {
                    "type": "string",
                    "enum": [
                      "beer",
                      "radler",
                      "alcohol_free",
                      "wine",
                      "soft_drink",
                      "other"
                    ],
                    "default": "beer"
                  },
                  "drinkName": {
                    "type": "string",
                    "maxLength": 255
                  },
                  "basePriceCents": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "pricePaidCents": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "volumeMl": {
                    "type": "integer",
                    "minimum": 1,
                    "default": 1000
                  },
                  "recordedAt": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "idempotencyKey": {
                    "type": "string",
                    "maxLength": 255
                  }
                },
                "required": [
                  "festivalId",
                  "date",
                  "pricePaidCents"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Consumption logged successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "userId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "festivalId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "date": {
                      "type": "string",
                      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "drinkCount": {
                      "type": "integer"
                    },
                    "beerCount": {
                      "type": "integer"
                    },
                    "totalSpentCents": {
                      "type": "integer"
                    },
                    "totalTipCents": {
                      "type": "integer"
                    },
                    "avgPriceCents": {
                      "type": "integer"
                    },
                    "tentVisits": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "tentId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "visitDate": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "tentName": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "tentId",
                          "visitDate",
                          "tentName"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "userId",
                    "festivalId",
                    "date",
                    "createdAt",
                    "updatedAt",
                    "drinkCount",
                    "beerCount",
                    "totalSpentCents",
                    "totalTipCents",
                    "avgPriceCents",
                    "tentVisits"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "consumption"
        ],
        "summary": "List consumptions for a date",
        "description": "Get all consumptions for the authenticated user on a specific date",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
            },
            "required": true,
            "name": "date",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Consumptions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "consumptions": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "attendanceId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "tentId": {
                            "type": "string",
                            "nullable": true,
                            "format": "uuid"
                          },
                          "drinkType": {
                            "type": "string",
                            "enum": [
                              "beer",
                              "radler",
                              "alcohol_free",
                              "wine",
                              "soft_drink",
                              "other"
                            ]
                          },
                          "drinkName": {
                            "type": "string",
                            "nullable": true
                          },
                          "basePriceCents": {
                            "type": "integer"
                          },
                          "pricePaidCents": {
                            "type": "integer"
                          },
                          "tipCents": {
                            "type": "integer",
                            "nullable": true
                          },
                          "volumeMl": {
                            "type": "integer",
                            "nullable": true
                          },
                          "recordedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "id",
                          "attendanceId",
                          "tentId",
                          "drinkType",
                          "drinkName",
                          "basePriceCents",
                          "pricePaidCents",
                          "tipCents",
                          "volumeMl",
                          "recordedAt",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "consumptions"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/consumption/{id}": {
      "delete": {
        "tags": [
          "consumption"
        ],
        "summary": "Delete a consumption",
        "description": "Delete a consumption record by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Consumption deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Consumption not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/attendance": {
      "get": {
        "tags": [
          "attendance"
        ],
        "summary": "List user's attendance records",
        "description": "Returns paginated list of attendance records with computed totals",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "nullable": true,
              "minimum": 0,
              "default": 0
            },
            "required": false,
            "name": "offset",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Attendances retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "festivalId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "date": {
                            "type": "string",
                            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "drinkCount": {
                            "type": "integer"
                          },
                          "beerCount": {
                            "type": "integer"
                          },
                          "totalSpentCents": {
                            "type": "integer"
                          },
                          "totalTipCents": {
                            "type": "integer"
                          },
                          "avgPriceCents": {
                            "type": "integer"
                          },
                          "tentVisits": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "tentId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "visitDate": {
                                  "type": "string",
                                  "format": "date-time"
                                },
                                "tentName": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "tentId",
                                "visitDate",
                                "tentName"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "festivalId",
                          "date",
                          "createdAt",
                          "updatedAt",
                          "drinkCount",
                          "beerCount",
                          "totalSpentCents",
                          "totalTipCents",
                          "avgPriceCents",
                          "tentVisits"
                        ]
                      }
                    },
                    "total": {
                      "type": "integer"
                    },
                    "limit": {
                      "type": "integer"
                    },
                    "offset": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "data",
                    "total",
                    "limit",
                    "offset"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "attendance"
        ],
        "summary": "Create or update attendance with tents",
        "description": "Creates or updates an attendance record with tent visits. Triggers tent check-in notifications for group members.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "festivalId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "date": {
                    "type": "string",
                    "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                  },
                  "tents": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "default": []
                  },
                  "amount": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 0
                  }
                },
                "required": [
                  "festivalId",
                  "date"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Attendance created/updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "attendanceId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "tentsChanged": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "attendanceId",
                    "tentsChanged"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error - Invalid festival ID",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/attendance/by-date": {
      "get": {
        "tags": [
          "attendance"
        ],
        "summary": "Get attendance for a specific date",
        "description": "Returns attendance record for a specific date with tent IDs and picture URLs",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
            },
            "required": true,
            "name": "date",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Attendance retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "attendance": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "date": {
                          "type": "string",
                          "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "drinkCount": {
                          "type": "integer"
                        },
                        "beerCount": {
                          "type": "integer"
                        },
                        "totalSpentCents": {
                          "type": "integer"
                        },
                        "totalTipCents": {
                          "type": "integer"
                        },
                        "avgPriceCents": {
                          "type": "integer"
                        },
                        "tentVisits": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "tentId": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "visitDate": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "tentName": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "tentId",
                              "visitDate",
                              "tentName"
                            ]
                          }
                        },
                        "tentIds": {
                          "type": "array",
                          "items": {
                            "type": "string",
                            "format": "uuid"
                          }
                        },
                        "pictureUrls": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "pictures": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "pictureUrl": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "pictureUrl"
                            ]
                          }
                        }
                      },
                      "required": [
                        "id",
                        "userId",
                        "festivalId",
                        "date",
                        "createdAt",
                        "updatedAt",
                        "drinkCount",
                        "beerCount",
                        "totalSpentCents",
                        "totalTipCents",
                        "avgPriceCents",
                        "tentVisits",
                        "tentIds",
                        "pictureUrls",
                        "pictures"
                      ]
                    }
                  },
                  "required": [
                    "attendance"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/attendance/{id}": {
      "delete": {
        "tags": [
          "attendance"
        ],
        "summary": "Delete an attendance record",
        "description": "Deletes an attendance and all its associated consumptions (cascading delete)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Attendance deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Attendance not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/attendance/personal": {
      "post": {
        "tags": [
          "attendance"
        ],
        "summary": "Update personal attendance",
        "description": "Updates personal attendance without triggering group notifications. Preserves existing tent visit timestamps.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "festivalId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "date": {
                    "type": "string",
                    "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                  },
                  "tents": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "default": []
                  },
                  "amount": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 0
                  }
                },
                "required": [
                  "festivalId",
                  "date"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Attendance updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "attendanceId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "tentsAdded": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "format": "uuid"
                      }
                    },
                    "tentsRemoved": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "format": "uuid"
                      }
                    }
                  },
                  "required": [
                    "attendanceId",
                    "tentsAdded",
                    "tentsRemoved"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/attendance/check-in/{reservationId}": {
      "post": {
        "tags": [
          "attendance"
        ],
        "summary": "Check in from a reservation",
        "description": "Creates an attendance record from a scheduled reservation, adds tent visit, and marks the reservation as completed.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "reservationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Check-in successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "attendanceId": {
                      "type": "string",
                      "format": "uuid"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Reservation not found or already processed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/calendar/personal": {
      "get": {
        "tags": [
          "calendar"
        ],
        "summary": "Get personal calendar events",
        "description": "Returns calendar events for the authenticated user including attendances, tent visits, and reservations",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Calendar events retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "events": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "title": {
                            "type": "string"
                          },
                          "from": {
                            "type": "string"
                          },
                          "to": {
                            "type": "string",
                            "nullable": true
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "attendance",
                              "tent_visit",
                              "beer_summary",
                              "reservation"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "title",
                          "from",
                          "type"
                        ]
                      }
                    },
                    "festivalId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "festivalStartDate": {
                      "type": "string",
                      "nullable": true
                    },
                    "festivalEndDate": {
                      "type": "string",
                      "nullable": true
                    }
                  },
                  "required": [
                    "events",
                    "festivalId"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/calendar/group/{groupId}": {
      "get": {
        "tags": [
          "calendar"
        ],
        "summary": "Get group calendar events",
        "description": "Returns calendar events for all members of a group including attendances, tent visits, and reservations",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group calendar events retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "events": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "title": {
                            "type": "string"
                          },
                          "from": {
                            "type": "string"
                          },
                          "to": {
                            "type": "string",
                            "nullable": true
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "attendance",
                              "tent_visit",
                              "beer_summary",
                              "reservation"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "title",
                          "from",
                          "type"
                        ]
                      }
                    },
                    "festivalId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "festivalStartDate": {
                      "type": "string",
                      "nullable": true
                    },
                    "festivalEndDate": {
                      "type": "string",
                      "nullable": true
                    }
                  },
                  "required": [
                    "events",
                    "festivalId"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/festivals": {
      "get": {
        "tags": [
          "festivals"
        ],
        "summary": "List all festivals",
        "description": "Returns list of festivals with optional filtering by status or active state",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "upcoming",
                "active",
                "ended"
              ]
            },
            "required": false,
            "name": "status",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "isActive",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Festivals retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string"
                          },
                          "startDate": {
                            "type": "string",
                            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                          },
                          "endDate": {
                            "type": "string",
                            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                          },
                          "beerCost": {
                            "type": "integer",
                            "nullable": true
                          },
                          "location": {
                            "type": "string",
                            "nullable": true
                          },
                          "mapUrl": {
                            "type": "string",
                            "nullable": true,
                            "format": "uri"
                          },
                          "isActive": {
                            "type": "boolean"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "upcoming",
                              "active",
                              "ended"
                            ]
                          },
                          "timezone": {
                            "type": "string",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "startDate",
                          "endDate",
                          "beerCost",
                          "location",
                          "mapUrl",
                          "isActive",
                          "status",
                          "timezone",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/festivals/{id}": {
      "get": {
        "tags": [
          "festivals"
        ],
        "summary": "Get festival by ID",
        "description": "Returns a single festival by its ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Festival retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "startDate": {
                      "type": "string",
                      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                    },
                    "endDate": {
                      "type": "string",
                      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                    },
                    "beerCost": {
                      "type": "integer",
                      "nullable": true
                    },
                    "location": {
                      "type": "string",
                      "nullable": true
                    },
                    "mapUrl": {
                      "type": "string",
                      "nullable": true,
                      "format": "uri"
                    },
                    "isActive": {
                      "type": "boolean"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "upcoming",
                        "active",
                        "ended"
                      ]
                    },
                    "timezone": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "startDate",
                    "endDate",
                    "beerCost",
                    "location",
                    "mapUrl",
                    "isActive",
                    "status",
                    "timezone",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Festival not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/tents": {
      "get": {
        "tags": [
          "tents"
        ],
        "summary": "List tents for a festival",
        "description": "Returns list of tents with festival-specific pricing and availability",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": false,
            "name": "festivalId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Tents retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "festivalId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "tentId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "beerPrice": {
                            "type": "number",
                            "nullable": true
                          },
                          "tent": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string"
                              },
                              "category": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "category"
                            ]
                          }
                        },
                        "required": [
                          "festivalId",
                          "tentId",
                          "beerPrice",
                          "tent"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups": {
      "post": {
        "tags": [
          "groups"
        ],
        "summary": "Create a new group",
        "description": "Creates a group and automatically adds the creator as the first member",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100
                  },
                  "festivalId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "winningCriteria": {
                    "type": "string",
                    "enum": [
                      "days_attended",
                      "total_beers",
                      "avg_beers"
                    ],
                    "default": "total_beers"
                  }
                },
                "required": [
                  "name",
                  "festivalId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "festivalId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "winningCriteria": {
                      "type": "string",
                      "enum": [
                        "days_attended",
                        "total_beers",
                        "avg_beers"
                      ]
                    },
                    "inviteToken": {
                      "type": "string"
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "festivalId",
                    "winningCriteria",
                    "inviteToken",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "groups"
        ],
        "summary": "List user's groups",
        "description": "Returns all groups the user is a member of",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": false,
            "name": "festivalId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Groups retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "festivalId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "winningCriteria": {
                            "type": "string",
                            "enum": [
                              "days_attended",
                              "total_beers",
                              "avg_beers"
                            ]
                          },
                          "inviteToken": {
                            "type": "string"
                          },
                          "createdBy": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "memberCount": {
                            "type": "integer"
                          },
                          "isMember": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "festivalId",
                          "winningCriteria",
                          "inviteToken",
                          "createdBy",
                          "createdAt",
                          "updatedAt",
                          "memberCount"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups/search": {
      "get": {
        "tags": [
          "groups"
        ],
        "summary": "Search groups by name",
        "description": "Search for groups by name. Returns public group info (no invite tokens).",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1
            },
            "required": true,
            "name": "name",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": false,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 10
            },
            "required": false,
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Groups found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string"
                          },
                          "festivalId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "memberCount": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "festivalId",
                          "memberCount"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups/{id}": {
      "get": {
        "tags": [
          "groups"
        ],
        "summary": "Get group details",
        "description": "Returns group information including member count",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "festivalId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "winningCriteria": {
                      "type": "string",
                      "enum": [
                        "days_attended",
                        "total_beers",
                        "avg_beers"
                      ]
                    },
                    "inviteToken": {
                      "type": "string"
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "memberCount": {
                      "type": "integer"
                    },
                    "isMember": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "festivalId",
                    "winningCriteria",
                    "inviteToken",
                    "createdBy",
                    "createdAt",
                    "updatedAt",
                    "memberCount"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not a group member",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "groups"
        ],
        "summary": "Update group settings",
        "description": "Update group name, winning criteria, or description. Only the group creator can update.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100
                  },
                  "winningCriteriaId": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 3
                  },
                  "description": {
                    "type": "string",
                    "nullable": true,
                    "maxLength": 500
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "festivalId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "winningCriteria": {
                      "type": "string",
                      "enum": [
                        "days_attended",
                        "total_beers",
                        "avg_beers"
                      ]
                    },
                    "inviteToken": {
                      "type": "string"
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "festivalId",
                    "winningCriteria",
                    "inviteToken",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not the group creator",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups/{id}/join": {
      "post": {
        "tags": [
          "groups"
        ],
        "summary": "Join a group",
        "description": "Join a group using an optional invite token",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "inviteToken": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully joined group",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Invalid invite token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Already a member",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups/{id}/leave": {
      "post": {
        "tags": [
          "groups"
        ],
        "summary": "Leave a group",
        "description": "Remove yourself from a group",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully left group",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not a group member",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups/{id}/members": {
      "get": {
        "tags": [
          "groups"
        ],
        "summary": "List group members",
        "description": "Returns all members of a group with their profile information",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Members retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "username": {
                            "type": "string"
                          },
                          "fullName": {
                            "type": "string",
                            "nullable": true
                          },
                          "avatarUrl": {
                            "type": "string",
                            "nullable": true,
                            "format": "uri"
                          },
                          "joinedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "userId",
                          "username",
                          "fullName",
                          "avatarUrl",
                          "joinedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not a group member",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups/{id}/members/{userId}": {
      "delete": {
        "tags": [
          "groups"
        ],
        "summary": "Remove a member from group",
        "description": "Remove a user from the group. Only the group creator can do this.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "userId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Member removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not the group creator",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Group or member not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups/{id}/token/renew": {
      "post": {
        "tags": [
          "groups"
        ],
        "summary": "Regenerate invite token",
        "description": "Generate a new invite token for the group. Only the group creator can do this.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Token renewed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "inviteToken": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "inviteToken"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not the group creator",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups/{id}/gallery": {
      "get": {
        "tags": [
          "groups"
        ],
        "summary": "Get group photo gallery",
        "description": "Returns all public photos shared by group members for the group's festival",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Gallery retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "username": {
                            "type": "string"
                          },
                          "fullName": {
                            "type": "string",
                            "nullable": true
                          },
                          "avatarUrl": {
                            "type": "string",
                            "nullable": true,
                            "format": "uri"
                          },
                          "pictureUrl": {
                            "type": "string",
                            "format": "uri"
                          },
                          "date": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "username",
                          "fullName",
                          "avatarUrl",
                          "pictureUrl",
                          "date",
                          "createdAt"
                        ]
                      }
                    },
                    "total": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "data",
                    "total"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not a group member",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups/join-by-token": {
      "post": {
        "tags": [
          "groups"
        ],
        "summary": "Join a group by invite token",
        "description": "Join a group using only the invite token, without knowing the group ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "inviteToken": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "inviteToken"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully joined group",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "group": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "winningCriteria": {
                          "type": "string",
                          "enum": [
                            "days_attended",
                            "total_beers",
                            "avg_beers"
                          ]
                        },
                        "inviteToken": {
                          "type": "string"
                        },
                        "createdBy": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "festivalId",
                        "winningCriteria",
                        "inviteToken",
                        "createdBy",
                        "createdAt",
                        "updatedAt"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "message",
                    "group"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Invalid invite token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Already a member",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/leaderboard/winning-criteria": {
      "get": {
        "tags": [
          "leaderboard"
        ],
        "summary": "List winning criteria options",
        "description": "Returns all available winning criteria for group competitions",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Winning criteria retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer"
                          },
                          "name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "name"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/leaderboard": {
      "get": {
        "tags": [
          "leaderboard"
        ],
        "summary": "Get global leaderboard",
        "description": "Returns ranked list of all users for a festival with pagination",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "days_attended",
                "total_beers",
                "avg_beers"
              ],
              "default": "total_beers"
            },
            "required": false,
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "nullable": true,
              "minimum": 0,
              "default": 0
            },
            "required": false,
            "name": "offset",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Leaderboard retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "username": {
                            "type": "string"
                          },
                          "fullName": {
                            "type": "string",
                            "nullable": true
                          },
                          "avatarUrl": {
                            "type": "string",
                            "nullable": true,
                            "format": "uri"
                          },
                          "daysAttended": {
                            "type": "integer"
                          },
                          "totalBeers": {
                            "type": "integer"
                          },
                          "avgBeers": {
                            "type": "number"
                          },
                          "position": {
                            "type": "integer"
                          },
                          "groupCount": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "userId",
                          "username",
                          "fullName",
                          "avatarUrl",
                          "daysAttended",
                          "totalBeers",
                          "avgBeers",
                          "position"
                        ]
                      }
                    },
                    "total": {
                      "type": "integer"
                    },
                    "limit": {
                      "type": "integer"
                    },
                    "offset": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "data",
                    "total",
                    "limit",
                    "offset"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/groups/{id}/leaderboard": {
      "get": {
        "tags": [
          "leaderboard"
        ],
        "summary": "Get group leaderboard",
        "description": "Returns ranked list of group members",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "days_attended",
                "total_beers",
                "avg_beers"
              ]
            },
            "required": false,
            "name": "sortBy",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Group leaderboard retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "username": {
                            "type": "string"
                          },
                          "fullName": {
                            "type": "string",
                            "nullable": true
                          },
                          "avatarUrl": {
                            "type": "string",
                            "nullable": true,
                            "format": "uri"
                          },
                          "daysAttended": {
                            "type": "integer"
                          },
                          "totalBeers": {
                            "type": "integer"
                          },
                          "avgBeers": {
                            "type": "number"
                          },
                          "position": {
                            "type": "integer"
                          },
                          "groupCount": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "userId",
                          "username",
                          "fullName",
                          "avatarUrl",
                          "daysAttended",
                          "totalBeers",
                          "avgBeers",
                          "position"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not a group member",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/achievements": {
      "get": {
        "tags": [
          "achievements"
        ],
        "summary": "List user's achievements",
        "description": "Returns all achievements unlocked by the user for a festival",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "consumption",
                "attendance",
                "explorer",
                "social",
                "competitive",
                "special"
              ]
            },
            "required": false,
            "name": "category",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Achievements retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "achievementId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "festivalId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "rarity": {
                            "type": "string",
                            "enum": [
                              "common",
                              "rare",
                              "epic",
                              "legendary"
                            ]
                          },
                          "unlockedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "userNotifiedAt": {
                            "type": "string",
                            "nullable": true,
                            "format": "date-time"
                          },
                          "groupNotifiedAt": {
                            "type": "string",
                            "nullable": true,
                            "format": "date-time"
                          },
                          "achievement": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string"
                              },
                              "category": {
                                "type": "string",
                                "enum": [
                                  "consumption",
                                  "attendance",
                                  "explorer",
                                  "social",
                                  "competitive",
                                  "special"
                                ]
                              },
                              "icon": {
                                "type": "string"
                              },
                              "points": {
                                "type": "integer"
                              },
                              "rarity": {
                                "type": "string",
                                "enum": [
                                  "common",
                                  "rare",
                                  "epic",
                                  "legendary"
                                ]
                              },
                              "condition": {
                                "type": "object",
                                "additionalProperties": {
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "number"
                                    },
                                    {
                                      "type": "boolean"
                                    },
                                    {
                                      "nullable": true
                                    }
                                  ]
                                }
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "description",
                              "category",
                              "icon",
                              "points",
                              "rarity",
                              "condition",
                              "createdAt",
                              "updatedAt"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "achievementId",
                          "festivalId",
                          "rarity",
                          "unlockedAt",
                          "userNotifiedAt",
                          "groupNotifiedAt",
                          "achievement"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/achievements/evaluate": {
      "post": {
        "tags": [
          "achievements"
        ],
        "summary": "Evaluate achievements",
        "description": "Manually triggers achievement evaluation for the user. Returns newly unlocked achievements.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "festivalId": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "festivalId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Achievement evaluation completed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "newAchievements": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "achievementId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "festivalId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "rarity": {
                            "type": "string",
                            "enum": [
                              "common",
                              "rare",
                              "epic",
                              "legendary"
                            ]
                          },
                          "unlockedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "userNotifiedAt": {
                            "type": "string",
                            "nullable": true,
                            "format": "date-time"
                          },
                          "groupNotifiedAt": {
                            "type": "string",
                            "nullable": true,
                            "format": "date-time"
                          },
                          "achievement": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string"
                              },
                              "category": {
                                "type": "string",
                                "enum": [
                                  "consumption",
                                  "attendance",
                                  "explorer",
                                  "social",
                                  "competitive",
                                  "special"
                                ]
                              },
                              "icon": {
                                "type": "string"
                              },
                              "points": {
                                "type": "integer"
                              },
                              "rarity": {
                                "type": "string",
                                "enum": [
                                  "common",
                                  "rare",
                                  "epic",
                                  "legendary"
                                ]
                              },
                              "condition": {
                                "type": "object",
                                "additionalProperties": {
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "number"
                                    },
                                    {
                                      "type": "boolean"
                                    },
                                    {
                                      "nullable": true
                                    }
                                  ]
                                }
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "description",
                              "category",
                              "icon",
                              "points",
                              "rarity",
                              "condition",
                              "createdAt",
                              "updatedAt"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "achievementId",
                          "festivalId",
                          "rarity",
                          "unlockedAt",
                          "userNotifiedAt",
                          "groupNotifiedAt",
                          "achievement"
                        ]
                      }
                    },
                    "totalPoints": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "newAchievements",
                    "totalPoints"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/achievements/with-progress": {
      "get": {
        "tags": [
          "achievements"
        ],
        "summary": "Get all achievements with progress",
        "description": "Returns all achievements (locked and unlocked) with user progress for a festival",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "consumption",
                "attendance",
                "explorer",
                "social",
                "competitive",
                "special"
              ]
            },
            "required": false,
            "name": "category",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Achievements with progress retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          },
                          "category": {
                            "type": "string",
                            "enum": [
                              "consumption",
                              "attendance",
                              "explorer",
                              "social",
                              "competitive",
                              "special"
                            ]
                          },
                          "icon": {
                            "type": "string"
                          },
                          "points": {
                            "type": "integer"
                          },
                          "rarity": {
                            "type": "string",
                            "enum": [
                              "common",
                              "rare",
                              "epic",
                              "legendary"
                            ]
                          },
                          "conditions": {
                            "type": "object",
                            "additionalProperties": {
                              "nullable": true
                            },
                            "default": {}
                          },
                          "is_active": {
                            "type": "boolean"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "is_unlocked": {
                            "type": "boolean"
                          },
                          "unlocked_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "user_progress": {
                            "type": "object",
                            "properties": {
                              "current_value": {
                                "type": "number"
                              },
                              "target_value": {
                                "type": "number"
                              },
                              "percentage": {
                                "type": "number"
                              },
                              "last_updated": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "current_value",
                              "target_value",
                              "percentage",
                              "last_updated"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "description",
                          "category",
                          "icon",
                          "points",
                          "rarity",
                          "is_active",
                          "created_at",
                          "updated_at",
                          "is_unlocked"
                        ]
                      }
                    },
                    "stats": {
                      "type": "object",
                      "properties": {
                        "total_achievements": {
                          "type": "integer"
                        },
                        "unlocked_achievements": {
                          "type": "integer"
                        },
                        "total_points": {
                          "type": "integer"
                        },
                        "breakdown_by_category": {
                          "type": "object",
                          "properties": {
                            "consumption": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "integer"
                                },
                                "unlocked": {
                                  "type": "integer"
                                },
                                "points": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "total",
                                "unlocked",
                                "points"
                              ]
                            },
                            "attendance": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "integer"
                                },
                                "unlocked": {
                                  "type": "integer"
                                },
                                "points": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "total",
                                "unlocked",
                                "points"
                              ]
                            },
                            "explorer": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "integer"
                                },
                                "unlocked": {
                                  "type": "integer"
                                },
                                "points": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "total",
                                "unlocked",
                                "points"
                              ]
                            },
                            "social": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "integer"
                                },
                                "unlocked": {
                                  "type": "integer"
                                },
                                "points": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "total",
                                "unlocked",
                                "points"
                              ]
                            },
                            "competitive": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "integer"
                                },
                                "unlocked": {
                                  "type": "integer"
                                },
                                "points": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "total",
                                "unlocked",
                                "points"
                              ]
                            },
                            "special": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "integer"
                                },
                                "unlocked": {
                                  "type": "integer"
                                },
                                "points": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "total",
                                "unlocked",
                                "points"
                              ]
                            }
                          }
                        },
                        "breakdown_by_rarity": {
                          "type": "object",
                          "properties": {
                            "common": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "integer"
                                },
                                "unlocked": {
                                  "type": "integer"
                                },
                                "points": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "total",
                                "unlocked",
                                "points"
                              ]
                            },
                            "rare": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "integer"
                                },
                                "unlocked": {
                                  "type": "integer"
                                },
                                "points": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "total",
                                "unlocked",
                                "points"
                              ]
                            },
                            "epic": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "integer"
                                },
                                "unlocked": {
                                  "type": "integer"
                                },
                                "points": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "total",
                                "unlocked",
                                "points"
                              ]
                            },
                            "legendary": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "integer"
                                },
                                "unlocked": {
                                  "type": "integer"
                                },
                                "points": {
                                  "type": "integer"
                                }
                              },
                              "required": [
                                "total",
                                "unlocked",
                                "points"
                              ]
                            }
                          }
                        }
                      },
                      "required": [
                        "total_achievements",
                        "unlocked_achievements",
                        "total_points",
                        "breakdown_by_category",
                        "breakdown_by_rarity"
                      ]
                    }
                  },
                  "required": [
                    "data",
                    "stats"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/achievements/leaderboard": {
      "get": {
        "tags": [
          "achievements"
        ],
        "summary": "Get achievement leaderboard",
        "description": "Returns the achievement leaderboard for a festival",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "consumption",
                "attendance",
                "explorer",
                "social",
                "competitive",
                "special"
              ]
            },
            "required": false,
            "name": "category",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Leaderboard retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "user_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "username": {
                            "type": "string",
                            "nullable": true
                          },
                          "full_name": {
                            "type": "string",
                            "nullable": true
                          },
                          "avatar_url": {
                            "type": "string",
                            "nullable": true
                          },
                          "total_achievements": {
                            "type": "integer"
                          },
                          "total_points": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "user_id",
                          "username",
                          "full_name",
                          "avatar_url",
                          "total_achievements",
                          "total_points"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/achievements/available": {
      "get": {
        "tags": [
          "achievements"
        ],
        "summary": "List all available achievements",
        "description": "Returns all active achievements that can be unlocked",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Available achievements retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          },
                          "category": {
                            "type": "string",
                            "enum": [
                              "consumption",
                              "attendance",
                              "explorer",
                              "social",
                              "competitive",
                              "special"
                            ]
                          },
                          "icon": {
                            "type": "string"
                          },
                          "points": {
                            "type": "integer"
                          },
                          "rarity": {
                            "type": "string",
                            "enum": [
                              "common",
                              "rare",
                              "epic",
                              "legendary"
                            ]
                          },
                          "is_active": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "description",
                          "category",
                          "icon",
                          "points",
                          "rarity",
                          "is_active"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/notifications/token": {
      "post": {
        "tags": [
          "notifications"
        ],
        "summary": "Register FCM device token",
        "description": "Registers a Firebase Cloud Messaging device token with Novu for push notifications",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "token": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "token"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "FCM token registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/notifications/subscribe": {
      "post": {
        "tags": [
          "notifications"
        ],
        "summary": "Subscribe user to Novu",
        "description": "Subscribes a user to Novu notification system with their profile data",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "firstName": {
                    "type": "string"
                  },
                  "lastName": {
                    "type": "string"
                  },
                  "avatar": {
                    "type": "string",
                    "format": "uri"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User subscribed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/notifications/preferences": {
      "get": {
        "tags": [
          "notifications"
        ],
        "summary": "Get notification preferences",
        "description": "Retrieves the user's notification preferences",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Preferences retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "nullable": true,
                  "properties": {
                    "userId": {
                      "type": "string",
                      "nullable": true,
                      "format": "uuid"
                    },
                    "pushEnabled": {
                      "type": "boolean",
                      "nullable": true
                    },
                    "groupJoinEnabled": {
                      "type": "boolean",
                      "nullable": true
                    },
                    "checkinEnabled": {
                      "type": "boolean",
                      "nullable": true
                    },
                    "remindersEnabled": {
                      "type": "boolean",
                      "nullable": true
                    },
                    "achievementNotificationsEnabled": {
                      "type": "boolean",
                      "nullable": true
                    },
                    "groupNotificationsEnabled": {
                      "type": "boolean",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "nullable": true,
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "nullable": true,
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "userId",
                    "pushEnabled",
                    "groupJoinEnabled",
                    "checkinEnabled",
                    "remindersEnabled",
                    "achievementNotificationsEnabled",
                    "groupNotificationsEnabled",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "notifications"
        ],
        "summary": "Update notification preferences",
        "description": "Updates the user's notification preferences",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "pushEnabled": {
                    "type": "boolean"
                  },
                  "groupJoinEnabled": {
                    "type": "boolean"
                  },
                  "checkinEnabled": {
                    "type": "boolean"
                  },
                  "remindersEnabled": {
                    "type": "boolean"
                  },
                  "achievementNotificationsEnabled": {
                    "type": "boolean"
                  },
                  "groupNotificationsEnabled": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Preferences updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/wrapped/{festivalId}": {
      "get": {
        "tags": [
          "wrapped"
        ],
        "summary": "Get wrapped year-in-review data",
        "description": "Returns cached wrapped statistics for a user and festival. Returns null if not yet generated.",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Wrapped data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "wrapped": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "totalDays": {
                          "type": "integer"
                        },
                        "totalBeers": {
                          "type": "integer"
                        },
                        "totalSpent": {
                          "type": "number"
                        },
                        "avgBeersPerDay": {
                          "type": "number"
                        },
                        "favoriteTent": {
                          "type": "object",
                          "nullable": true,
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "name": {
                              "type": "string"
                            },
                            "visitCount": {
                              "type": "integer"
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "visitCount"
                          ]
                        },
                        "topDrinkType": {
                          "type": "string",
                          "nullable": true
                        },
                        "achievements": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unlockedAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "unlockedAt"
                            ]
                          }
                        },
                        "globalRank": {
                          "type": "integer",
                          "nullable": true
                        },
                        "groupRanks": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "groupId": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "groupName": {
                                "type": "string"
                              },
                              "rank": {
                                "type": "integer"
                              }
                            },
                            "required": [
                              "groupId",
                              "groupName",
                              "rank"
                            ]
                          }
                        },
                        "firstVisitDate": {
                          "type": "string",
                          "nullable": true,
                          "format": "date"
                        },
                        "lastVisitDate": {
                          "type": "string",
                          "nullable": true,
                          "format": "date"
                        },
                        "longestStreak": {
                          "type": "integer"
                        },
                        "generatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "userId",
                        "festivalId",
                        "totalDays",
                        "totalBeers",
                        "totalSpent",
                        "avgBeersPerDay",
                        "favoriteTent",
                        "topDrinkType",
                        "achievements",
                        "globalRank",
                        "groupRanks",
                        "firstVisitDate",
                        "lastVisitDate",
                        "longestStreak",
                        "generatedAt"
                      ]
                    },
                    "cached": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "wrapped",
                    "cached"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Festival not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/wrapped/{festivalId}/generate": {
      "post": {
        "tags": [
          "wrapped"
        ],
        "summary": "Generate wrapped year-in-review data",
        "description": "Generates or regenerates wrapped statistics for a user and festival. Set force=true to regenerate even if cached.",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "path"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "force": {
                    "type": "boolean",
                    "default": false
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Wrapped data generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "wrapped": {
                      "type": "object",
                      "properties": {
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "totalDays": {
                          "type": "integer"
                        },
                        "totalBeers": {
                          "type": "integer"
                        },
                        "totalSpent": {
                          "type": "number"
                        },
                        "avgBeersPerDay": {
                          "type": "number"
                        },
                        "favoriteTent": {
                          "type": "object",
                          "nullable": true,
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "name": {
                              "type": "string"
                            },
                            "visitCount": {
                              "type": "integer"
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "visitCount"
                          ]
                        },
                        "topDrinkType": {
                          "type": "string",
                          "nullable": true
                        },
                        "achievements": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unlockedAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "unlockedAt"
                            ]
                          }
                        },
                        "globalRank": {
                          "type": "integer",
                          "nullable": true
                        },
                        "groupRanks": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "groupId": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "groupName": {
                                "type": "string"
                              },
                              "rank": {
                                "type": "integer"
                              }
                            },
                            "required": [
                              "groupId",
                              "groupName",
                              "rank"
                            ]
                          }
                        },
                        "firstVisitDate": {
                          "type": "string",
                          "nullable": true,
                          "format": "date"
                        },
                        "lastVisitDate": {
                          "type": "string",
                          "nullable": true,
                          "format": "date"
                        },
                        "longestStreak": {
                          "type": "integer"
                        },
                        "generatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "userId",
                        "festivalId",
                        "totalDays",
                        "totalBeers",
                        "totalSpent",
                        "avgBeersPerDay",
                        "favoriteTent",
                        "topDrinkType",
                        "achievements",
                        "globalRank",
                        "groupRanks",
                        "firstVisitDate",
                        "lastVisitDate",
                        "longestStreak",
                        "generatedAt"
                      ]
                    },
                    "regenerated": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "wrapped",
                    "regenerated"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Festival not found or no data available",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/wrapped/{festivalId}/access": {
      "get": {
        "tags": [
          "wrapped"
        ],
        "summary": "Check wrapped access",
        "description": "Checks if the user is allowed to access wrapped data for a specific festival.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Access check result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "allowed": {
                      "type": "boolean"
                    },
                    "reason": {
                      "type": "string",
                      "enum": [
                        "not_ended",
                        "no_data",
                        "not_authenticated",
                        "error"
                      ]
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "allowed"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/wrapped/festivals": {
      "get": {
        "tags": [
          "wrapped"
        ],
        "summary": "Get available wrapped festivals",
        "description": "Returns a list of festivals for which wrapped data is available for the user.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Available festivals list",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "festivals": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string"
                          },
                          "year": {
                            "type": "integer"
                          },
                          "status": {
                            "type": "string"
                          },
                          "hasData": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "year",
                          "status",
                          "hasData"
                        ]
                      }
                    }
                  },
                  "required": [
                    "festivals"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/wrapped/regenerate": {
      "post": {
        "tags": [
          "wrapped"
        ],
        "summary": "Regenerate wrapped cache (admin only)",
        "description": "Admin function to regenerate cached wrapped data for specific users or festivals.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "festivalId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "userId": {
                    "type": "string",
                    "format": "uuid"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cache regeneration result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "regeneratedCount": {
                      "type": "integer"
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - not an admin",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/reservations": {
      "post": {
        "tags": [
          "reservations"
        ],
        "summary": "Create a tent reservation",
        "description": "Creates a new reservation for a specific tent and time. Optionally schedule reminders.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "festivalId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "tentId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "startAt": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "endAt": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "note": {
                    "type": "string",
                    "maxLength": 500
                  },
                  "visibleToGroups": {
                    "type": "boolean",
                    "default": true
                  },
                  "autoCheckin": {
                    "type": "boolean",
                    "default": false
                  },
                  "reminderOffsetMinutes": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1440,
                    "default": 30
                  }
                },
                "required": [
                  "festivalId",
                  "tentId",
                  "startAt"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reservation created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reservation": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tentId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tentName": {
                          "type": "string"
                        },
                        "startAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "endAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "pending",
                            "confirmed",
                            "checked_in",
                            "cancelled",
                            "expired"
                          ]
                        },
                        "note": {
                          "type": "string",
                          "nullable": true
                        },
                        "visibleToGroups": {
                          "type": "boolean"
                        },
                        "autoCheckin": {
                          "type": "boolean"
                        },
                        "reminderOffsetMinutes": {
                          "type": "integer"
                        },
                        "reminderSentAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "promptSentAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "processedAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "userId",
                        "festivalId",
                        "tentId",
                        "startAt",
                        "endAt",
                        "status",
                        "note",
                        "visibleToGroups",
                        "autoCheckin",
                        "reminderOffsetMinutes",
                        "reminderSentAt",
                        "promptSentAt",
                        "processedAt",
                        "createdAt",
                        "updatedAt"
                      ]
                    }
                  },
                  "required": [
                    "reservation"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "reservations"
        ],
        "summary": "List user reservations",
        "description": "Retrieves all reservations for the authenticated user with optional filters",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": false,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "confirmed",
                "checked_in",
                "cancelled",
                "expired"
              ]
            },
            "required": false,
            "name": "status",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true
            },
            "required": false,
            "name": "upcoming",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "nullable": true,
              "minimum": 0,
              "default": 0
            },
            "required": false,
            "name": "offset",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Reservations retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reservations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "festivalId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "tentId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "tentName": {
                            "type": "string"
                          },
                          "startAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "endAt": {
                            "type": "string",
                            "nullable": true,
                            "format": "date-time"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "pending",
                              "confirmed",
                              "checked_in",
                              "cancelled",
                              "expired"
                            ]
                          },
                          "note": {
                            "type": "string",
                            "nullable": true
                          },
                          "visibleToGroups": {
                            "type": "boolean"
                          },
                          "autoCheckin": {
                            "type": "boolean"
                          },
                          "reminderOffsetMinutes": {
                            "type": "integer"
                          },
                          "reminderSentAt": {
                            "type": "string",
                            "nullable": true,
                            "format": "date-time"
                          },
                          "promptSentAt": {
                            "type": "string",
                            "nullable": true,
                            "format": "date-time"
                          },
                          "processedAt": {
                            "type": "string",
                            "nullable": true,
                            "format": "date-time"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "nullable": true,
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "id",
                          "userId",
                          "festivalId",
                          "tentId",
                          "startAt",
                          "endAt",
                          "status",
                          "note",
                          "visibleToGroups",
                          "autoCheckin",
                          "reminderOffsetMinutes",
                          "reminderSentAt",
                          "promptSentAt",
                          "processedAt",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "total": {
                      "type": "integer"
                    },
                    "limit": {
                      "type": "integer"
                    },
                    "offset": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "reservations",
                    "total",
                    "limit",
                    "offset"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/reservations/{id}/checkin": {
      "post": {
        "tags": [
          "reservations"
        ],
        "summary": "Check in to a reservation",
        "description": "Marks a reservation as checked in. Optionally creates an attendance record if auto_checkin is enabled.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Checked in successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reservation": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tentId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tentName": {
                          "type": "string"
                        },
                        "startAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "endAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "pending",
                            "confirmed",
                            "checked_in",
                            "cancelled",
                            "expired"
                          ]
                        },
                        "note": {
                          "type": "string",
                          "nullable": true
                        },
                        "visibleToGroups": {
                          "type": "boolean"
                        },
                        "autoCheckin": {
                          "type": "boolean"
                        },
                        "reminderOffsetMinutes": {
                          "type": "integer"
                        },
                        "reminderSentAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "promptSentAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "processedAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "userId",
                        "festivalId",
                        "tentId",
                        "startAt",
                        "endAt",
                        "status",
                        "note",
                        "visibleToGroups",
                        "autoCheckin",
                        "reminderOffsetMinutes",
                        "reminderSentAt",
                        "promptSentAt",
                        "processedAt",
                        "createdAt",
                        "updatedAt"
                      ]
                    },
                    "attendance": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "date": {
                          "type": "string",
                          "format": "date"
                        }
                      },
                      "required": [
                        "id",
                        "date"
                      ]
                    }
                  },
                  "required": [
                    "reservation"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Reservation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/reservations/{id}": {
      "delete": {
        "tags": [
          "reservations"
        ],
        "summary": "Cancel a reservation",
        "description": "Cancels an existing reservation",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Reservation cancelled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reservation": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tentId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tentName": {
                          "type": "string"
                        },
                        "startAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "endAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "pending",
                            "confirmed",
                            "checked_in",
                            "cancelled",
                            "expired"
                          ]
                        },
                        "note": {
                          "type": "string",
                          "nullable": true
                        },
                        "visibleToGroups": {
                          "type": "boolean"
                        },
                        "autoCheckin": {
                          "type": "boolean"
                        },
                        "reminderOffsetMinutes": {
                          "type": "integer"
                        },
                        "reminderSentAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "promptSentAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "processedAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "userId",
                        "festivalId",
                        "tentId",
                        "startAt",
                        "endAt",
                        "status",
                        "note",
                        "visibleToGroups",
                        "autoCheckin",
                        "reminderOffsetMinutes",
                        "reminderSentAt",
                        "promptSentAt",
                        "processedAt",
                        "createdAt",
                        "updatedAt"
                      ]
                    }
                  },
                  "required": [
                    "reservation"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Reservation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "reservations"
        ],
        "summary": "Get a reservation by ID",
        "description": "Retrieves a single reservation by its ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Reservation retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reservation": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tentId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tentName": {
                          "type": "string"
                        },
                        "startAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "endAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "pending",
                            "confirmed",
                            "checked_in",
                            "cancelled",
                            "expired"
                          ]
                        },
                        "note": {
                          "type": "string",
                          "nullable": true
                        },
                        "visibleToGroups": {
                          "type": "boolean"
                        },
                        "autoCheckin": {
                          "type": "boolean"
                        },
                        "reminderOffsetMinutes": {
                          "type": "integer"
                        },
                        "reminderSentAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "promptSentAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "processedAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "userId",
                        "festivalId",
                        "tentId",
                        "startAt",
                        "endAt",
                        "status",
                        "note",
                        "visibleToGroups",
                        "autoCheckin",
                        "reminderOffsetMinutes",
                        "reminderSentAt",
                        "promptSentAt",
                        "processedAt",
                        "createdAt",
                        "updatedAt"
                      ]
                    }
                  },
                  "required": [
                    "reservation"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Reservation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "reservations"
        ],
        "summary": "Update a reservation",
        "description": "Updates an existing reservation. Only provided fields will be updated.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "startAt": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "endAt": {
                    "type": "string",
                    "nullable": true,
                    "format": "date-time"
                  },
                  "note": {
                    "type": "string",
                    "nullable": true,
                    "maxLength": 500
                  },
                  "visibleToGroups": {
                    "type": "boolean"
                  },
                  "autoCheckin": {
                    "type": "boolean"
                  },
                  "reminderOffsetMinutes": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1440
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reservation updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reservation": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tentId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tentName": {
                          "type": "string"
                        },
                        "startAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "endAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "pending",
                            "confirmed",
                            "checked_in",
                            "cancelled",
                            "expired"
                          ]
                        },
                        "note": {
                          "type": "string",
                          "nullable": true
                        },
                        "visibleToGroups": {
                          "type": "boolean"
                        },
                        "autoCheckin": {
                          "type": "boolean"
                        },
                        "reminderOffsetMinutes": {
                          "type": "integer"
                        },
                        "reminderSentAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "promptSentAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "processedAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "nullable": true,
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "userId",
                        "festivalId",
                        "tentId",
                        "startAt",
                        "endAt",
                        "status",
                        "note",
                        "visibleToGroups",
                        "autoCheckin",
                        "reminderOffsetMinutes",
                        "reminderSentAt",
                        "promptSentAt",
                        "processedAt",
                        "createdAt",
                        "updatedAt"
                      ]
                    }
                  },
                  "required": [
                    "reservation"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Reservation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/location/sessions": {
      "post": {
        "tags": [
          "location"
        ],
        "summary": "Start location sharing session",
        "description": "Creates a new location sharing session for a festival. User can only have one active session per festival.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "festivalId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "durationMinutes": {
                    "type": "integer",
                    "minimum": 5,
                    "maximum": 480,
                    "default": 120
                  },
                  "initialLocation": {
                    "type": "object",
                    "properties": {
                      "latitude": {
                        "type": "number",
                        "minimum": -90,
                        "maximum": 90
                      },
                      "longitude": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                      },
                      "accuracy": {
                        "type": "number",
                        "minimum": 0
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": [
                      "latitude",
                      "longitude",
                      "timestamp"
                    ]
                  }
                },
                "required": [
                  "festivalId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session started successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "session": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "isActive": {
                          "type": "boolean"
                        },
                        "startedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "userId",
                        "festivalId",
                        "isActive",
                        "startedAt",
                        "expiresAt",
                        "createdAt",
                        "updatedAt"
                      ]
                    }
                  },
                  "required": [
                    "session"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - User already has active session for this festival",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/location/sessions/{id}": {
      "delete": {
        "tags": [
          "location"
        ],
        "summary": "Stop location sharing session",
        "description": "Stops an active location sharing session",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Session stopped successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "session": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "festivalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "isActive": {
                          "type": "boolean"
                        },
                        "startedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "userId",
                        "festivalId",
                        "isActive",
                        "startedAt",
                        "expiresAt",
                        "createdAt",
                        "updatedAt"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "session"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "location"
        ],
        "summary": "Update location for session",
        "description": "Updates the current location for an active location sharing session",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sessionId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "location": {
                    "type": "object",
                    "properties": {
                      "latitude": {
                        "type": "number",
                        "minimum": -90,
                        "maximum": 90
                      },
                      "longitude": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                      },
                      "accuracy": {
                        "type": "number",
                        "minimum": 0
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": [
                      "latitude",
                      "longitude",
                      "timestamp"
                    ]
                  }
                },
                "required": [
                  "sessionId",
                  "location"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Location updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/location/nearby": {
      "get": {
        "tags": [
          "location"
        ],
        "summary": "Get nearby group members",
        "description": "Retrieves group members currently sharing their location near the user's position",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "nullable": true,
              "minimum": -90,
              "maximum": 90
            },
            "required": false,
            "name": "latitude",
            "in": "query"
          },
          {
            "schema": {
              "type": "number",
              "nullable": true,
              "minimum": -180,
              "maximum": 180
            },
            "required": false,
            "name": "longitude",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 100,
              "maximum": 5000,
              "default": 1000
            },
            "required": false,
            "name": "radiusMeters",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": false,
            "name": "groupId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Nearby members retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "members": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "sessionId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "username": {
                            "type": "string"
                          },
                          "fullName": {
                            "type": "string",
                            "nullable": true
                          },
                          "avatarUrl": {
                            "type": "string",
                            "nullable": true,
                            "format": "uri"
                          },
                          "groupId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "groupName": {
                            "type": "string"
                          },
                          "lastLocation": {
                            "type": "object",
                            "nullable": true,
                            "properties": {
                              "latitude": {
                                "type": "number",
                                "minimum": -90,
                                "maximum": 90
                              },
                              "longitude": {
                                "type": "number",
                                "minimum": -180,
                                "maximum": 180
                              },
                              "accuracy": {
                                "type": "number",
                                "minimum": 0
                              },
                              "timestamp": {
                                "type": "string",
                                "format": "date-time"
                              }
                            },
                            "required": [
                              "latitude",
                              "longitude",
                              "timestamp"
                            ]
                          },
                          "distance": {
                            "type": "number",
                            "nullable": true
                          }
                        },
                        "required": [
                          "sessionId",
                          "userId",
                          "username",
                          "fullName",
                          "avatarUrl",
                          "groupId",
                          "groupName",
                          "lastLocation",
                          "distance"
                        ]
                      }
                    },
                    "userLocation": {
                      "type": "object",
                      "properties": {
                        "latitude": {
                          "type": "number",
                          "minimum": -90,
                          "maximum": 90
                        },
                        "longitude": {
                          "type": "number",
                          "minimum": -180,
                          "maximum": 180
                        },
                        "accuracy": {
                          "type": "number",
                          "minimum": 0
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "latitude",
                        "longitude",
                        "timestamp"
                      ]
                    },
                    "radiusMeters": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "members",
                    "userLocation",
                    "radiusMeters"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/photos/upload-url": {
      "get": {
        "tags": [
          "photos"
        ],
        "summary": "Get signed upload URL for photo",
        "description": "Returns a signed upload URL for uploading a beer picture. Validates file type, size, and attendance ownership.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "attendanceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1
            },
            "required": true,
            "name": "fileName",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "pattern": "^image\\/(jpeg|jpg|png|webp|gif)$"
            },
            "required": true,
            "name": "fileType",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 10485760
            },
            "required": true,
            "name": "fileSize",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Upload URL generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "uploadUrl": {
                      "type": "string",
                      "format": "uri"
                    },
                    "publicUrl": {
                      "type": "string",
                      "format": "uri"
                    },
                    "expiresIn": {
                      "type": "integer"
                    },
                    "pictureId": {
                      "type": "string",
                      "format": "uuid"
                    }
                  },
                  "required": [
                    "uploadUrl",
                    "publicUrl",
                    "expiresIn",
                    "pictureId"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Attendance not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/photos/{id}/confirm": {
      "post": {
        "tags": [
          "photos"
        ],
        "summary": "Confirm photo upload",
        "description": "Confirms that a photo was successfully uploaded to storage and marks it as confirmed in the database.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Photo confirmed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "picture": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "url": {
                          "type": "string",
                          "format": "uri"
                        },
                        "attendanceId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "uploadedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "url",
                        "attendanceId",
                        "uploadedAt"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "picture"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Photo not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/photos": {
      "get": {
        "tags": [
          "photos"
        ],
        "summary": "List user photos",
        "description": "Retrieves all beer pictures for the authenticated user with optional filters",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": false,
            "name": "attendanceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": false,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": false,
            "name": "userId",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "nullable": true,
              "minimum": 0,
              "default": 0
            },
            "required": false,
            "name": "offset",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Photos retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "photos": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "attendanceId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "pictureUrl": {
                            "type": "string",
                            "format": "uri"
                          },
                          "visibility": {
                            "type": "string",
                            "enum": [
                              "public",
                              "private"
                            ]
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "id",
                          "attendanceId",
                          "userId",
                          "pictureUrl",
                          "visibility",
                          "createdAt"
                        ]
                      }
                    },
                    "total": {
                      "type": "integer"
                    },
                    "limit": {
                      "type": "integer"
                    },
                    "offset": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "photos",
                    "total",
                    "limit",
                    "offset"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/photos/{id}": {
      "delete": {
        "tags": [
          "photos"
        ],
        "summary": "Delete a photo",
        "description": "Deletes a beer picture from both storage and database",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Photo deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Photo not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/photos/settings/global": {
      "get": {
        "tags": [
          "photos"
        ],
        "summary": "Get global photo privacy settings",
        "description": "Returns user's global photo visibility settings",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Settings retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "userId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "hidePhotosFromAllGroups": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "userId",
                    "hidePhotosFromAllGroups"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "photos"
        ],
        "summary": "Update global photo privacy settings",
        "description": "Updates user's global photo visibility settings",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "hidePhotosFromAllGroups": {
                    "type": "boolean"
                  }
                },
                "required": [
                  "hidePhotosFromAllGroups"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Settings updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "userId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "hidePhotosFromAllGroups": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "userId",
                    "hidePhotosFromAllGroups"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/photos/settings/groups": {
      "get": {
        "tags": [
          "photos"
        ],
        "summary": "Get all group photo privacy settings",
        "description": "Returns user's photo visibility settings for all groups",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Settings retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "settings": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "groupId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "groupName": {
                            "type": "string"
                          },
                          "hidePhotosFromGroup": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "userId",
                          "groupId",
                          "groupName",
                          "hidePhotosFromGroup"
                        ]
                      }
                    }
                  },
                  "required": [
                    "settings"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/photos/settings/groups/{groupId}": {
      "get": {
        "tags": [
          "photos"
        ],
        "summary": "Get group photo privacy settings",
        "description": "Returns user's photo visibility settings for a specific group",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Settings retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "userId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "groupId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "groupName": {
                      "type": "string"
                    },
                    "hidePhotosFromGroup": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "userId",
                    "groupId",
                    "groupName",
                    "hidePhotosFromGroup"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "photos"
        ],
        "summary": "Update group photo privacy settings",
        "description": "Updates user's photo visibility settings for a specific group",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "groupId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "hidePhotosFromGroup": {
                    "type": "boolean"
                  }
                },
                "required": [
                  "hidePhotosFromGroup"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Settings updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "userId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "groupId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "groupName": {
                      "type": "string"
                    },
                    "hidePhotosFromGroup": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "userId",
                    "groupId",
                    "groupName",
                    "hidePhotosFromGroup"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/photos/{id}/visibility": {
      "put": {
        "tags": [
          "photos"
        ],
        "summary": "Update photo visibility",
        "description": "Updates visibility setting for a specific photo",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "visibility": {
                    "type": "string",
                    "enum": [
                      "public",
                      "private"
                    ]
                  }
                },
                "required": [
                  "visibility"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Visibility updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Photo not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/photos/visibility": {
      "put": {
        "tags": [
          "photos"
        ],
        "summary": "Bulk update photo visibility",
        "description": "Updates visibility setting for multiple photos",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "photoIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "minItems": 1
                  },
                  "visibility": {
                    "type": "string",
                    "enum": [
                      "public",
                      "private"
                    ]
                  }
                },
                "required": [
                  "photoIds",
                  "visibility"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Visibility updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "updatedCount": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "success",
                    "updatedCount"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - some photos don't belong to user",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/profile": {
      "get": {
        "tags": [
          "profile"
        ],
        "summary": "Get current user's profile",
        "description": "Returns the profile data for the authenticated user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Profile retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "profile": {
                      "type": "object",
                      "properties": {
                        "full_name": {
                          "type": "string",
                          "nullable": true
                        },
                        "username": {
                          "type": "string",
                          "nullable": true
                        },
                        "avatar_url": {
                          "type": "string",
                          "nullable": true
                        },
                        "preferred_language": {
                          "type": "string",
                          "nullable": true
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "full_name",
                        "username",
                        "avatar_url",
                        "preferred_language"
                      ]
                    }
                  },
                  "required": [
                    "profile"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "profile"
        ],
        "summary": "Update current user's profile",
        "description": "Updates the profile data for the authenticated user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "minLength": 3,
                    "maxLength": 30
                  },
                  "full_name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100
                  },
                  "preferred_language": {
                    "type": "string",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "profile": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "username": {
                          "type": "string",
                          "nullable": true
                        },
                        "full_name": {
                          "type": "string",
                          "nullable": true
                        },
                        "avatar_url": {
                          "type": "string",
                          "nullable": true
                        },
                        "tutorial_completed": {
                          "type": "boolean",
                          "nullable": true
                        },
                        "tutorial_completed_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "updated_at": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "username",
                        "full_name",
                        "avatar_url",
                        "tutorial_completed",
                        "tutorial_completed_at",
                        "updated_at"
                      ]
                    }
                  },
                  "required": [
                    "profile"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "profile"
        ],
        "summary": "Delete current user's account",
        "description": "Permanently deletes the user's account and all associated data",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Account deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/profile/tutorial": {
      "get": {
        "tags": [
          "profile"
        ],
        "summary": "Get tutorial status",
        "description": "Returns the tutorial completion status for the user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Tutorial status retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "object",
                      "properties": {
                        "tutorial_completed": {
                          "type": "boolean"
                        },
                        "tutorial_completed_at": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "tutorial_completed",
                        "tutorial_completed_at"
                      ]
                    }
                  },
                  "required": [
                    "status"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/profile/tutorial/complete": {
      "post": {
        "tags": [
          "profile"
        ],
        "summary": "Complete tutorial",
        "description": "Marks the tutorial as completed for the user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Tutorial marked as complete",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/profile/tutorial/reset": {
      "post": {
        "tags": [
          "profile"
        ],
        "summary": "Reset tutorial",
        "description": "Resets the tutorial status for the user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Tutorial reset successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/profile/missing-fields": {
      "get": {
        "tags": [
          "profile"
        ],
        "summary": "Get missing profile fields",
        "description": "Returns which profile fields are not yet filled in",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Missing fields retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "missingFields": {
                      "type": "object",
                      "properties": {
                        "username": {
                          "type": "boolean"
                        },
                        "full_name": {
                          "type": "boolean"
                        },
                        "avatar_url": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "username",
                        "full_name",
                        "avatar_url"
                      ]
                    },
                    "hasMissingFields": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "missingFields",
                    "hasMissingFields"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/profile/highlights": {
      "get": {
        "tags": [
          "profile"
        ],
        "summary": "Get user highlights",
        "description": "Returns statistics and highlights for the user's festival attendance",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Highlights retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "highlights": {
                      "type": "object",
                      "properties": {
                        "totalBeers": {
                          "type": "number"
                        },
                        "totalDays": {
                          "type": "number"
                        },
                        "totalSpent": {
                          "type": "number"
                        },
                        "avgBeersPerDay": {
                          "type": "number"
                        },
                        "favoriteDay": {
                          "type": "string",
                          "nullable": true
                        },
                        "favoriteTent": {
                          "type": "string",
                          "nullable": true
                        },
                        "groupPositions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "groupId": {
                                "type": "string"
                              },
                              "groupName": {
                                "type": "string"
                              },
                              "position": {
                                "type": "number"
                              },
                              "totalMembers": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "groupId",
                              "groupName",
                              "position",
                              "totalMembers"
                            ]
                          }
                        }
                      },
                      "required": [
                        "totalBeers",
                        "totalDays",
                        "totalSpent",
                        "avgBeersPerDay",
                        "favoriteDay",
                        "favoriteTent",
                        "groupPositions"
                      ]
                    }
                  },
                  "required": [
                    "highlights"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/profile/avatar/upload-url": {
      "get": {
        "tags": [
          "profile"
        ],
        "summary": "Get signed upload URL for avatar",
        "description": "Returns a signed upload URL for uploading a user avatar. Client uploads directly to storage.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1
            },
            "required": true,
            "name": "fileName",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "pattern": "^image\\/(jpeg|png|webp|gif)$"
            },
            "required": true,
            "name": "fileType",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 10485760
            },
            "required": true,
            "name": "fileSize",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Upload URL generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "uploadUrl": {
                      "type": "string",
                      "format": "uri"
                    },
                    "fileName": {
                      "type": "string"
                    },
                    "expiresIn": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "uploadUrl",
                    "fileName",
                    "expiresIn"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/profile/avatar/confirm": {
      "post": {
        "tags": [
          "profile"
        ],
        "summary": "Confirm avatar upload",
        "description": "Confirms that an avatar was successfully uploaded to storage and updates the user's profile.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fileName": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "fileName"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Avatar confirmed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "fileName": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "fileName"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/activity-feed": {
      "get": {
        "tags": [
          "activity-feed"
        ],
        "summary": "Get activity feed",
        "description": "Returns activity feed items for a festival with cursor-based pagination",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "festivalId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "cursor",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 5
            },
            "required": false,
            "name": "limit",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Activity feed retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "activities": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "user_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "festival_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "activity_type": {
                            "type": "string",
                            "enum": [
                              "beer_count_update",
                              "tent_checkin",
                              "photo_upload",
                              "group_join",
                              "achievement_unlock"
                            ]
                          },
                          "activity_data": {
                            "type": "object",
                            "additionalProperties": {
                              "nullable": true
                            }
                          },
                          "activity_time": {
                            "type": "string"
                          },
                          "username": {
                            "type": "string",
                            "nullable": true
                          },
                          "full_name": {
                            "type": "string",
                            "nullable": true
                          },
                          "avatar_url": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "user_id",
                          "festival_id",
                          "activity_type",
                          "activity_data",
                          "activity_time",
                          "username",
                          "full_name",
                          "avatar_url"
                        ]
                      }
                    },
                    "nextCursor": {
                      "type": "string",
                      "nullable": true
                    },
                    "hasMore": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "activities",
                    "nextCursor",
                    "hasMore"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "error",
                    "message"
                  ]
                }
              }
            }
          }
        }
      }
    }
  }
}